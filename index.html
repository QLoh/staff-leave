<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>法定假別查詢系統</title>
  <style>
    body {
      font-family: Arial, "微軟正黑體", sans-serif;
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      background: #f9f9f9;
      color: #333;
    }
    h2 { text-align: center; }
    select, button {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      font-size: 16px;
    }
    .result {
      margin-top: 20px;
      padding: 15px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <h2>法定假別查詢系統</h2>

  <!-- 主選單 -->
  <label for="leaveType">選擇假別：</label>
  <select id="leaveType">
    <option value="">--請選擇--</option>
    <option value="病假">病假（含生理假）</option>
    <option value="事假">事假（含家庭照顧假）</option>
    <option value="特別休假">特別休假</option>
    <option value="喪假">喪假</option>
    <option value="產假">產假</option>
    <option value="陪產檢及陪產假">陪產檢及陪產假</option>
    <option value="婚假">婚假</option>
    <option value="原住民族歲時祭儀假">原住民族歲時祭儀假</option>
  </select>

  <!-- 子選單 -->
  <div id="subtypeContainer" style="display:none;">
    <label for="subtype">選擇子類別：</label>
    <select id="subtype"></select>
  </div>

  <button onclick="showResult()">查詢</button>

  <div id="result" class="result" style="display:none;"></div>

  <!-- 部分工時公式 -->
  <div id="partTimeRules" class="result" style="display:none;">
    <h3>部分工時請假換算規則</h3>
    <p><b>計算公式：</b></p>
    <ul>
      <li>特休假：特休日數 × (週工時 ÷ 40)</li>
      <li>事假、婚假、喪假、陪產假、原住民族歲時祭儀假：假日數 × (週工時 ÷ 40)</li>
      <li>病假、安胎假：日工時 = 週工時 ÷ 每週出勤日數，再依「半薪 / 無薪」計算</li>
      <li>生理假：當日排定工時 × 50% 給薪</li>
      <li>產假：週工時 × 對應週數（順產 8 週；流產依孕期不同週數）</li>
    </ul>
    <p><b>附註提醒：</b></p>
    <ul>
      <li>部分工時依比例計算，不得低於勞基法規定的基本假日數。</li>
      <li>「曆日假別」如產假、生理假，應依週工時或當日班表換算。</li>
      <li>各假別之給薪狀態（全薪 / 半薪 / 無薪），仍依法律規定與工作規則執行。</li>
      <li>公司應在工作規則明訂換算方式，以避免勞資爭議。</li>
    </ul>
  </div>

  <script>
    const leaveData = {
      "病假": {
        subtypes: {
          "普通病假": {
            days: "1年內30日（含未住院）",
            pay: "前30日半薪，其後無薪",
            proof: "醫師診斷證明",
            note: "未住院部分全年最多30日"
          },
          "住院病假": {
            days: "1年內最長1年",
            pay: "前30日半薪，其後無薪",
            proof: "醫師診斷證明＋住院證明",
            note: "住院可合併計算"
          },
          "生理假": {
            days: "每月1日，全年最多3日",
            pay: "半薪",
            proof: "不需證明（雇主不得要求）",
            note: "第4日後併入病假計算"
          }
        }
      },
      "事假": {
        days: "每年14日",
        pay: "無薪",
        proof: "事假單",
        note: "家庭照顧假併入此天數；可依小時請假（112小時）"
      },
      "特別休假": {
        note: "依年資給假，3日至30日",
        proof: "年資計算資料",
        pay: "有薪"
      },
      "喪假": {
        subtypes: {
          "父母、養父母、配偶": {
            days: "8日",
            pay: "有薪",
            proof: "死亡證明及關係證明"
          },
          "祖父母、兄弟姊妹": {
            days: "6日",
            pay: "有薪",
            proof: "死亡證明及關係證明"
          },
          "曾祖父母、配偶祖父母": {
            days: "3日",
            pay: "有薪",
            proof: "死亡證明及關係證明"
          }
        }
      },
      "產假": {
        subtypes: {
          "懷孕未滿2月流產": {
            days: "5日",
            pay: "無薪",
            proof: "醫師診斷證明"
          },
          "懷孕2月以上未滿3月流產": {
            days: "7日",
            pay: "無薪",
            proof: "醫師診斷證明"
          },
          "懷孕3月以上未滿6月流產": {
            days: "4週",
            pay: "有薪",
            proof: "醫師診斷證明"
          },
          "懷孕6月以上流產": {
            days: "8週",
            pay: "有薪",
            proof: "醫師診斷證明"
          },
          "分娩": {
            days: "8週",
            pay: "有薪（工作未滿6個月者發半薪）",
            proof: "出生證明或媽媽手冊"
          }
        }
      },
      "陪產檢及陪產假": {
        days: "7日",
        pay: "有薪",
        proof: "媽媽手冊或出生證明",
        note: "陪產檢假於懷孕期間請；陪產假於分娩當日及前後15日內請"
      },
      "婚假": {
        days: "8日",
        pay: "有薪",
        proof: "結婚登記證明"
      },
      "原住民族歲時祭儀假": {
        days: "3日",
        pay: "有薪",
        proof: "戶口名簿或族別證明",
        note: "可請自己、配偶、父母的祭儀日，不扣全勤"
      }
    };

    const leaveTypeSelect = document.getElementById("leaveType");
    const subtypeContainer = document.getElementById("subtypeContainer");
    const subtypeSelect = document.getElementById("subtype");
    const resultDiv = document.getElementById("result");
    const partTimeDiv = document.getElementById("partTimeRules");

    leaveTypeSelect.addEventListener("change", function() {
      const type = this.value;
      resultDiv.style.display = "none";
      partTimeDiv.style.display = "none";
      if (type && leaveData[type]?.subtypes) {
        subtypeContainer.style.display = "block";
        subtypeSelect.innerHTML = "";
        Object.keys(leaveData[type].subtypes).forEach(sub => {
          const opt = document.createElement("option");
          opt.value = sub;
          opt.textContent = sub;
          subtypeSelect.appendChild(opt);
        });
      } else {
        subtypeContainer.style.display = "none";
        subtypeSelect.innerHTML = "";
      }
    });

    function showResult() {
      const type = leaveTypeSelect.value;
      const subtype = subtypeSelect.value;
      let data;
      if (!type) {
        alert("請先選擇假別！");
        return;
      }
      if (subtype) {
        data = leaveData[type].subtypes[subtype];
      } else {
        data = leaveData[type];
      }
      if (!data) return;

      let html = `<h3>${type}${subtype ? " - " + subtype : ""}</h3>`;
      if (data.days) html += `<p><b>給假天數：</b>${data.days}</p>`;
      if (data.hours) html += `<p><b>請假單位：</b>${data.hours}</p>`;
      if (data.pay) html += `<p><b>給薪狀況：</b>${data.pay}</p>`;
      if (data.fullAttendance) html += `<p><b>全勤影響：</b>${data.fullAttendance}</p>`;
      if (data.proof) html += `<p><b>所需憑證：</b>${data.proof}</p>`;
      if (data.note) html += `<p><b>補充：</b>${data.note}</p>`;

      resultDiv.innerHTML = html;
      resultDiv.style.display = "block";

      // 顯示部分工時規則
      partTimeDiv.style.display = "block";
    }
  </script>
</body>
</html>
